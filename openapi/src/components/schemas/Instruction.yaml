InstructionUnion:
  oneOf:
    - $ref: "#/TimelineAddEntries"
  discriminator:
    propertyName: type
    mapping": # deprecated
      TimelineAddEntries: "#/TimelineAddEntries"

InstructionType:
  type: string
  enum:
    [
      TimelineAddEntries,
      TimelineAddToModule,
      TimelineTerminateTimeline,
      TimelineShowAlert,
    ]

TimelineAddEntries:
  required:
    - type
    - entries
  properties:
    type:
      type: string
      $ref: "#/InstructionType" # TimelineAddEntries
    entries:
      type: array
      items:
        $ref: "#/TimelineAddEntry"

TimelineAddEntry:
  required:
    - "content"
    - "entryId"
    - "sortIndex"
  properties:
    content:
      $ref: "./Content.yaml#/ContentUnion"
    entryId:
      type: string
      pattern: '^[a-z\-]+[0-9]+$'
    sortIndex:
      type: string
      pattern: "[0-9]+$"
